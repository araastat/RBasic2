<!DOCTYPE html>
<html>
<head>
  <title>R Basics II</title>
  <meta charset="utf-8">
  <meta name="description" content="R Basics II">
  <meta name="author" content="Abhijit Dasgupta">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="libraries/highlighters/highlight.js/css/solarized-light.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
  <script data-main="libraries/frameworks/io2012/js/slides" 
    src="libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
    <link rel="stylesheet" href = "libraries/widgets/bootstrap/css/bootstrap.css">
<link rel="stylesheet" href = "libraries/widgets/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href = "assets/css/custom.css">
<link rel="stylesheet" href = "assets/css/ribbons.css">

</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
    <!-- END LOGO SLIDE -->
    

    <!-- TITLE SLIDE -->
    <!-- Should I move this to a Local Layout File? -->
    <slide class="title-slide segue nobackground">
      <aside class="gdbar">
        <img src="assets/img/Rlogo-1.png">
      </aside>
      <hgroup class="auto-fadein">
        <h1>R Basics II</h1>
        <h2>A Data Workshop presented by Data Community DC</h2>
        <p>Abhijit Dasgupta<br/>Data Community DC</p>
      </hgroup>
      <a href="https://github.com/araastat/RBasic2/zipball/gh-pages" class="example">
        Download
      </a>
      
      <footer class = 'license'>
        <a href='http://creativecommons.org/licenses/by-nc-nd/3.0/'>
        <img width = '80px' src = 'http://mirrors.creativecommons.org/presskit/buttons/88x31/png/by-nc-nd.png'>
        </a>
      </footer>
    </slide>

    <!-- SLIDES -->
      <slide class="" id="slide-1" style="background:;">
  <hgroup>
    <h2>About me</h2>
  </hgroup>
  <article>
    <ul>
<li>PhD biostatistician with over 10 years bioinformatics experience</li>
<li>Data Science / Data Engineering consultant

<ul>
<li>NIH, local startups, Brown University</li>
</ul></li>
<li>20 years experience in R, S+</li>
<li>Organizer of Statistical Programming DC meetup</li>
<li>Board member of Data Community DC</li>
</ul>

<pre><code>## Attaching package: &#39;xtable&#39;
</code></pre>

<pre><code>## The following object is masked from &#39;package:Hmisc&#39;:
## 
## label, label&lt;-
</code></pre>

<!-- html table generated in R 3.0.1 by xtable 1.7-1 package -->

<!-- Sat Oct 19 15:57:08 2013 -->

<TABLE border=0>
  <TR> <TD> E-mail </TD> <TD> abhijit@datacommunitydc.org </TD> </TR>
  <TR> <TD> Twitter </TD> <TD> @webbedfeet </TD> </TR>
   </TABLE>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-2" style="background:;">
  <hgroup>
    <h2>Assumptions</h2>
  </hgroup>
  <article>
    <ul class = "build">
<li>You have R installed</li>
<li>You know some basics of R 

<ul>
<li>Creating variables</li>
<li>Creating basic graphs</li>
<li>Running some analyses</li>
</ul></li>
<li>You may or may not have programming experience</li>
<li>You love playing with data</li>
</ul>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-3" style="background:;">
  <hgroup>
    <h2>Objective</h2>
  </hgroup>
  <article>
    <h3>To get you started using R for a data analysis workflow</h3>

<p><img src="Workflow.svg" alt=""></p>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-4" style="background:;">
  <hgroup>
    <h2>Objective</h2>
  </hgroup>
  <article>
    <h3>To get you started using R for a data analysis workflow</h3>

<p><img src="Workflow2.svg" alt=""></p>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-5" style="background:;">
  <hgroup>
    <h2>Expectations</h2>
  </hgroup>
  <article>
    <h3>What to expect</h3>

<ul>
<li>Overview of R and how to get started with analytics using R</li>
<li>Hands-on examples</li>
<li>A launching pad for your adoption and use of R</li>
</ul>

<h3>What <u>not</u> to expect</h3>

<ul>
<li>A comprehensive, all-encompassing description of R</li>
<li>Covering everything R can do</li>
</ul>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-6" style="background:;">
  <hgroup>
    <h2>The way forward from here</h2>
  </hgroup>
  <article>
    <h3>Use R for as many projects as possible</h3>

<h3>Work through the &quot;steep&quot; learning curve</h3>

<h3>Use available resources both within R and online</h3>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="segue dark" id="slide-7" style="background:;">
  <hgroup>
    <h2>Background</h2>
  </hgroup>
  <article>
    
    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-8" style="background:;">
  <hgroup>
    <h2>Some background knowledge</h2>
  </hgroup>
  <article>
    <ul>
<li>R as a calculator</li>
<li>Ingesting data

<ul>
<li><code>read.table</code>, <code>read.csv</code></li>
</ul></li>
<li>Types of data

<ul>
<li>numeric, integer, character, Date</li>
<li>vector, matrix, array, list, <strong>data.frame</strong></li>
</ul></li>
<li>Base graphics

<ul>
<li>plot, points, lines</li>
<li>xlab, ylab</li>
<li>par (col, cex, ...)</li>
<li>mfrow</li>
</ul></li>
</ul>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-9" style="background:;">
  <hgroup>
    <h2>Some background knowledge</h2>
  </hgroup>
  <article>
    <ul>
<li>Export graphs

<ul>
<li>png, svg, pdf, jpeg</li>
</ul></li>
<li>Some statistics

<ul>
<li><code>mean</code>, <code>median</code>, <code>summary</code></li>
<li><code>t.test</code>, <code>wilcox.text</code>, <code>lm</code></li>
</ul></li>
</ul>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-10" style="background:;">
  <hgroup>
    <h2>Where are we?</h2>
  </hgroup>
  <article>
    <ul>
<li>The first thing you want to do is contain all your project-related scripts in a folder</li>
<li>All the R data files will be in this folder</li>
</ul>

<pre><code class="r">getwd() # What is the current working directory?
setwd() # Set the working directory
</code></pre>

<h3>What&#39;s here?</h3>

<pre><code class="r">dir()       # shows files in current directory
file.path() # creates a file path string
ls()        # Shows objects in the current session
</code></pre>

<div style="background-color:lightgrey;">
<p>
RStudio allows you to create "Projects" which hold everything nicely
together along with Git functionality, if desired</p>
</div>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-11" style="background:;">
  <hgroup>
    <h2>Banging head on wall???</h2>
  </hgroup>
  <article>
    <h3>Within R</h3>

<ul>
<li><code>help</code> or <code>?</code>

<ul>
<li><code>help(data.frame)</code> or <code>?data.frame</code></li>
</ul></li>
</ul>

<h3>Online</h3>

<ul>
<li>Stack Overflow: r tag</li>
<li>Twitter: #rstats</li>
<li>R-Bloggers.com</li>
</ul>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-12" style="background:;">
  <hgroup>
    <h2>Some tips on R coding</h2>
  </hgroup>
  <article>
    <ul>
<li>The R Style Guide by Google</li>
<li>Comment character <code>#</code> can be placed at the beginning or at the right of code</li>
<li>Statements are ended with return or semicolon (;)</li>
<li>Names in R are quite liberal but it is recommended that you use common naming conventions

<ul>
<li>First character letter, followed by letters, digits, underscores or periods</li>
<li>Note that the period has some special meaning and is used often in R naming to separate object names (e.g. customer.name)</li>
<li>It is recommended that variable names use underscores instead of dots especially when combining with databases</li>
</ul></li>
</ul>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-13" style="background:;">
  <hgroup>
    <h2>Launching pad</h2>
  </hgroup>
  <article>
    <p>We will take off from here:</p>

<ul>
<li>More functionality of R</li>
<li>Introduction to the R package ecosystem</li>
<li>&quot;Best&quot; practices (or rather, my practices)</li>
<li>Tips and Tricks</li>
<li>Resources</li>
</ul>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="quote nobackground segue dark" id="slide-14" style="background:;">
  <hgroup>
    
  </hgroup>
  <article>
    <p><q> The question is not if R can do it, but how</q></p>

<p style="text-align:right;"> -- Douglas Bates </p>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="segue dark" id="slide-15" style="background:;">
  <hgroup>
    <h2>ETL (Extract, Transform, Load)</h2>
  </hgroup>
  <article>
    
    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="segue dark" id="slide-16" style="background:;">
  <hgroup>
    <h2>Extract</h2>
  </hgroup>
  <article>
    
    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-17" style="background:;">
  <hgroup>
    <h2>Reading data into R</h2>
  </hgroup>
  <article>
    <p>The workhorse for reading <em>tabular</em> data is <code>read.table</code></p>

<pre><code class="r">args(read.table)
</code></pre>

<pre><code>## function (file, header = FALSE, sep = &quot;&quot;, quote = &quot;\&quot;&#39;&quot;, dec = &quot;.&quot;, 
##     row.names, col.names, as.is = !stringsAsFactors, na.strings = &quot;NA&quot;, 
##     colClasses = NA, nrows = -1, skip = 0, check.names = TRUE, 
##     fill = !blank.lines.skip, strip.white = FALSE, blank.lines.skip = TRUE, 
##     comment.char = &quot;#&quot;, allowEscapes = FALSE, flush = FALSE, 
##     stringsAsFactors = default.stringsAsFactors(), fileEncoding = &quot;&quot;, 
##     encoding = &quot;unknown&quot;, text) 
## NULL
</code></pre>

<h3>Too much information!!!</h3>

<p>You can find explanations for all the arguments by using <code>?read.table</code></p>


    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
  <aside class="note">
    <section>
      <p>This is an example of a <code>function</code> in R. Functions have <em>arguments</em>, and you
can set default values for several of the arguments</p>

<p>The help system can be accessed using <code>?read.table</code> or <code>help(read.table)</code></p>

    </section>
  </aside>
</slide>

      <slide class="" id="slide-18" style="background:;">
  <hgroup>
    <h2>Reading data into R</h2>
  </hgroup>
  <article>
    <pre><code class="r">BP &lt;- read.table(&quot;data/bpdata.csv&quot;, header = T, sep = &quot;,&quot;)
head(BP)
</code></pre>

<pre><code>##   X X.1    sex sbp dbp snp1 snp2 snp3 snp4 snp5 snp6 snp7 snp8 snp9 snp10
## 1 1   1 FEMALE 171  89   CC   TT   TT   TT   CC   GG   AA   TT   TT    CC
## 2 2   2   MALE 160  99   TT   TT   CC &lt;NA&gt;   CC   AG   AT   CC   CT    CC
## 3 3   3 FEMALE 142  83   CT   TT   TC   CT   CC   AG   TT   CC   TT    CT
## 4 4   4   MALE 126  71   CT   TT   CC &lt;NA&gt;   CC   AA   TT   CC   TT    CT
## 5 5   5 FEMALE 126  82   CT   TT   CC   CC   CC   AA   TT   CC   TT    CT
## 6 6   6 FEMALE 132  89   CT   TT   CC   CC   CC &lt;NA&gt;   TT   CC   TT    TT
##   snp11 bmi
## 1    TT  25
## 2    CT  35
## 3    TT  34
## 4    CT  32
## 5    CT  34
## 6    CT  25
</code></pre>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-19" style="background:;">
  <hgroup>
    <h2>Reading data into R</h2>
  </hgroup>
  <article>
    <pre><code class="r">BP &lt;- read.table(&quot;data/bpdata.csv&quot;, header = T, sep = &quot;,&quot;)
head(BP)
</code></pre>

<pre><code class="r">BP &lt;- read.csv(&quot;data/bpdata.csv&quot;)
</code></pre>

<p>These functions are for tabular data stored in text files (even on the web!)</p>

<p>Let&#39;s get monthly S&amp;P data between April 1, 1999 and April 1, 2009</p>

<pre><code class="r">sp500 &lt;- read.csv(paste(&quot;http://ichart.finance.yahoo.com/table.csv?s=%5EGSPC&amp;a=03&amp;b=1&amp;c=1999&amp;d=03&amp;e=1&amp;f=2009&amp;g=m&amp;ignore=.csv&quot;))
</code></pre>

<pre><code>## Warning: unable to resolve &#39;ichart.finance.yahoo.com&#39;
</code></pre>

<pre><code>## Error: cannot open the connection
</code></pre>

<pre><code class="r">head(sp500, n = 3)
</code></pre>

<pre><code>## Error: object &#39;sp500&#39; not found
</code></pre>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-20" style="background:;">
  <hgroup>
    <h2>Reading from databases</h2>
  </hgroup>
  <article>
    <pre><code class="r">library(RODBC)  # Calling a package names RODBC
con &lt;- odbcConnect(&quot;MCT4&quot;)
sqlTables(con)
</code></pre>

<pre><code>##   TABLE_CAT TABLE_SCHEM TABLE_NAME TABLE_TYPE REMARKS
## 1      &lt;NA&gt;        &lt;NA&gt;     Sheet1      TABLE    &lt;NA&gt;
</code></pre>

<pre><code class="r">dat &lt;- sqlFetch(con, &quot;Sheet1&quot;)
head(dat[, 1:4])
</code></pre>

<pre><code>##   patid         Spec No  Age             Race
## 1    NA            &lt;NA&gt; &lt;NA&gt;             &lt;NA&gt;
## 2     1        s03-6643   62 african american
## 3     2       S98-16845   70            white
## 4     3 S00-10987 re-ex   43 african american
## 5    NA     S00-07663 p   43 african american
## 6     4       S99-22161   54            white
</code></pre>

<pre><code class="r">odbcClose(con)
</code></pre>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-21" style="background:;">
  <hgroup>
    <h2>Reading from databases</h2>
  </hgroup>
  <article>
    <p>On Windows, you can directly read from Excel files (often the quickest, most accurate method)</p>

<pre><code class="r">library(RODBC)
con &lt;- odbcConnectExcel(xls.file=&quot;C:/folder/data/myfile.xls&quot;)
dat1 &lt;- sqlFetch(con, &#39;Sheet1&#39;)
odbcClose(con)
</code></pre>

<p>You can also connect to MySQL (<code>RMySQL</code>), SQLite (<code>RSQLite</code>), PostgreSQL (<code>RPostgreSQL</code>)</p>

<p>Connections are also now available to Oracle, SAP, Teradata (use <code>Google</code>)</p>

<blockquote>
<p><code>RMySQL</code> under Windows is not straightforward. Use the advice available 
  <a href="http://stackoverflow.com/questions/9441527/rmysql-windows-7-home-installation-error">here</a></p>
</blockquote>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-22" style="background:;">
  <hgroup>
    <h2>Reading irregular or messy data</h2>
  </hgroup>
  <article>
    <p>How often is your data <em>nice</em>?</p>

<p>You can read most data files using the function <code>readLines</code>.</p>

<pre><code class="r">BP &lt;- readLines(&quot;data/bpdata.csv&quot;)
head(BP)
</code></pre>

<pre><code>## [1] &quot;\&quot;\&quot;,\&quot;X\&quot;,\&quot;sex\&quot;,\&quot;sbp\&quot;,\&quot;dbp\&quot;,\&quot;snp1\&quot;,\&quot;snp2\&quot;,\&quot;snp3\&quot;,\&quot;snp4\&quot;,\&quot;snp5\&quot;,\&quot;snp6\&quot;,\&quot;snp7\&quot;,\&quot;snp8\&quot;,\&quot;snp9\&quot;,\&quot;snp10\&quot;,\&quot;snp11\&quot;,\&quot;bmi\&quot;&quot;
## [2] &quot;\&quot;1\&quot;,1,\&quot;FEMALE\&quot;,171,89,\&quot;CC\&quot;,\&quot;TT\&quot;,\&quot;TT\&quot;,\&quot;TT\&quot;,\&quot;CC\&quot;,\&quot;GG\&quot;,\&quot;AA\&quot;,\&quot;TT\&quot;,\&quot;TT\&quot;,\&quot;CC\&quot;,\&quot;TT\&quot;,25&quot;                                      
## [3] &quot;\&quot;2\&quot;,2,\&quot;MALE\&quot;,160,99,\&quot;TT\&quot;,\&quot;TT\&quot;,\&quot;CC\&quot;,NA,\&quot;CC\&quot;,\&quot;AG\&quot;,\&quot;AT\&quot;,\&quot;CC\&quot;,\&quot;CT\&quot;,\&quot;CC\&quot;,\&quot;CT\&quot;,35&quot;                                            
## [4] &quot;\&quot;3\&quot;,3,\&quot;FEMALE\&quot;,142,83,\&quot;CT\&quot;,\&quot;TT\&quot;,\&quot;TC\&quot;,\&quot;CT\&quot;,\&quot;CC\&quot;,\&quot;AG\&quot;,\&quot;TT\&quot;,\&quot;CC\&quot;,\&quot;TT\&quot;,\&quot;CT\&quot;,\&quot;TT\&quot;,34&quot;                                      
## [5] &quot;\&quot;4\&quot;,4,\&quot;MALE\&quot;,126,71,\&quot;CT\&quot;,\&quot;TT\&quot;,\&quot;CC\&quot;,NA,\&quot;CC\&quot;,\&quot;AA\&quot;,\&quot;TT\&quot;,\&quot;CC\&quot;,\&quot;TT\&quot;,\&quot;CT\&quot;,\&quot;CT\&quot;,32&quot;                                            
## [6] &quot;\&quot;5\&quot;,5,\&quot;FEMALE\&quot;,126,82,\&quot;CT\&quot;,\&quot;TT\&quot;,\&quot;CC\&quot;,\&quot;CC\&quot;,\&quot;CC\&quot;,\&quot;AA\&quot;,\&quot;TT\&quot;,\&quot;CC\&quot;,\&quot;TT\&quot;,\&quot;CT\&quot;,\&quot;CT\&quot;,34&quot;
</code></pre>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-23" style="background:;">
  <hgroup>
    <h2>The <code>data.frame</code> object</h2>
  </hgroup>
  <article>
    <ul>
<li>The <code>data.frame</code> is the workhorse of R</li>
<li>A <code>data.frame</code> is essentially a list of vectors of the same length

<ul>
<li>Each vector may be of a different type</li>
</ul></li>
<li>A <code>data.frame</code> is represented as a table, with columns being the vectors</li>
<li>Think of a <code>data.frame</code> as a collection of variables</li>
<li>You can manipulate a <code>data.frame</code> like a matrix

<ul>
<li><code>D[1,]</code> or <code>D[,1:2]</code></li>
<li>It is <u>not</u> a matrix</li>
</ul></li>
<li>You can extract variables 

<ul>
<li><code>D$index</code> or <code>D[,&#39;index&#39;]</code> (recall data frames have columnar representation)</li>
</ul></li>
<li>Data frames act like SQL tables

<ul>
<li>You can join them (<code>merge</code>) and append to them (<code>cbind</code>, <code>rbind</code>)</li>
</ul></li>
</ul>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-24" style="background:;">
  <hgroup>
    <h2>The <code>factor</code> type</h2>
  </hgroup>
  <article>
    <ul>
<li>Factors are R&#39;s representation of categorical variables</li>
<li>Factors look like vectors of characters, but they are not!!</li>
</ul>

<pre><code class="r">gender = factor(c(&#39;M&#39;,&#39;M&#39;,&#39;F&#39;,&#39;M&#39;,&#39;F&#39;,&#39;F&#39;,&#39;F&#39;))
levels(gender)
is.factor(gender)
is.character(gender)
as.numeric(gender)
</code></pre>

<ul>
<li>Internally, factors are represented as integers, with each 
integer corresponding to a level of the categorical variable</li>
</ul>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-25" style="background:;">
  <hgroup>
    <h2>Functions</h2>
  </hgroup>
  <article>
    <p>Functions in R have the syntax</p>

<pre><code class="r">functionname &lt;- function(inp1, inp2=3, ...){

  statements

  return(list of output objects)

}
</code></pre>

<ul>
<li>If the <code>return</code> statement is absent, the function returns the last 
object created.</li>
<li><code>...</code> signifies optional parameters</li>
<li>You would use this as <code>results &lt;- functionname(inp1=x, inp2=4, inp3=9)</code></li>
<li>Functions are objects</li>
</ul>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="segue dark" id="slide-26" style="background:;">
  <hgroup>
    <h2>Common errors</h2>
  </hgroup>
  <article>
    
    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-27" style="background:;">
  <hgroup>
    <h2>Common errors</h2>
  </hgroup>
  <article>
    <pre><code class="r">library(ada)
</code></pre>

<pre><code>## Error: there is no package called &#39;ada&#39;
</code></pre>

<ul class = "build">
<li>Usually means that R package is not installed. Install it using <code>install.packages(&#39;ada&#39;)</code></li>
</ul>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-28" style="background:;">
  <hgroup>
    <h2>Common errors</h2>
  </hgroup>
  <article>
    <pre><code class="r">data(mtcars)
sumary(mtcars)
</code></pre>

<pre><code>## Error: could not find function &quot;sumary&quot;
</code></pre>

<ul class = "build">
<li>Check the spelling of your function. Here it should be <code>summary</code>, i.e., you missed a <code>m</code></li>
</ul>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-29" style="background:;">
  <hgroup>
    <h2>Common errors</h2>
  </hgroup>
  <article>
    <pre><code class="r">asfactor(1:10, ecxlud = NA)
</code></pre>

<pre><code>## Error: could not find function &quot;asfactor&quot;
</code></pre>

<ul class = "build">
<li>Missing a <code>.</code>. The function is <code>as.factor</code></li>
<li>Most 2-word function names in R are separated by <code>.</code></li>
</ul>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="segue dark" id="slide-30" style="background:;">
  <hgroup>
    <h2>Transformation</h2>
  </hgroup>
  <article>
    
    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-31" style="background:;">
  <hgroup>
    <h2>Data cleaning</h2>
  </hgroup>
  <article>
    <h3>Missing values</h3>

<ul>
<li>Missing values are coded as <code>NA</code></li>
<li>R can test for missing values using <code>is.na</code></li>
<li>Rows of data frames with complete data can be identified using 
<code>complete.cases(D)</code></li>
</ul>

<h3>Duplication</h3>

<ul>
<li>You can get a set of non-duplicate rows of a data frame using 
<code>D[!duplicated(D),]</code>.</li>
</ul>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-32" style="background:;">
  <hgroup>
    
  </hgroup>
  <article>
    <hr>

<h2>transform</h2>

<p>The <code>transform</code> function works on data.frames and allows you to quickly generate transformations of your data</p>

<pre><code class="r">data(mtcars)
mtcars &lt;- transform(mtcars, kmpg = mpg*1.6)
</code></pre>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-33" style="background:;">
  <hgroup>
    <h2>Subsetting</h2>
  </hgroup>
  <article>
    <p>The <code>subset</code> function can be used to easily subset data frames by rows and columns</p>

<pre><code class="r">cars2 &lt;- subset(mtcars, subset=(cyl==4 &amp; mpg &gt; 25) )
</code></pre>

<p>This is similar to using <code>sqldf</code></p>

<pre><code class="r">sqldf(&#39;select * from mtcars where cyl=4 and mpg &gt; 25&#39;)
</code></pre>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="segue dark" id="slide-34" style="background:;">
  <hgroup>
    <h2>&quot;Apply&quot;ing yourself</h2>
  </hgroup>
  <article>
    
    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-35" style="background:;">
  <hgroup>
    <h2>apply</h2>
  </hgroup>
  <article>
    <p><code>apply</code> works with matrices and applies a function along rows or columns</p>

<pre><code class="r">X = matrix(rnorm(100), ncol=5)
apply(X, 1, mean) # mean by rows
apply(X, 2, max) # maximum within columns
</code></pre>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-36" style="background:;">
  <hgroup>
    <h2>lapply</h2>
  </hgroup>
  <article>
    <p><code>lapply</code> applies the same function over elements of a list</p>

<pre><code class="r">x &lt;- list()
x[[1]] &lt;- rnorm(10)
x[[2]] &lt;- rnorm(25)
x[[3]] &lt;- c(&#39;a&#39;,&#39;c&#39;,&#39;x&#39;,&#39;g&#39;)

lapply(x, sort)
</code></pre>

<p>Recall that a <code>data.frame</code> is really a <code>list</code>, with the columns as elements of the list</p>

<pre><code class="r">lapply(mtcars, sort)
</code></pre>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="segue dark" id="slide-37" style="background:;">
  <hgroup>
    <h2>Wickham&#39;s duo: reshaping and split-apply-combine</h2>
  </hgroup>
  <article>
    
    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-38" style="background:;">
  <hgroup>
    <h2>reshape2</h2>
  </hgroup>
  <article>
    <p><code>reshape2</code> has functions to allow you to take a data frame from wide to long</p>

<pre><code class="r">R.df2 &lt;- melt(R.df, id=&#39;ID&#39;)
</code></pre>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-39" style="background:;">
  <hgroup>
    <h2>Split-apply-combine</h2>
  </hgroup>
  <article>
    <p>The basic idea of split-apply-combine is to</p>

<ul>
<li>split the data by some criterion</li>
<li>apply a function to the split data</li>
<li>combine the results of the function</li>
</ul>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-40" style="background:;">
  <hgroup>
    <h2>plyr</h2>
  </hgroup>
  <article>
    <p>plyr provides functions of the form (x)(y)ply, where</p>

<ul>
<li>(x) is the data type of the input</li>
<li>(y) is the data type of the output</li>
</ul>

<p>For example, ddply, dlply, ldply, etc.</p>

<pre><code class="r">library(plyr)
summ &lt;- ddply(mtcars, ~cyl, summarise, mean.mpg = mean(mpg))
print(summ)
</code></pre>

<pre><code>##   cyl mean.mpg
## 1   4    26.66
## 2   6    19.74
## 3   8    15.10
</code></pre>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-41" style="background:;">
  <hgroup>
    <h2>data.table</h2>
  </hgroup>
  <article>
    <pre><code class="r">library(data.table)
DT &lt;- data.table(mtcars)
print(DT[, mean(mpg), by = cyl])
</code></pre>

<pre><code>## Warning: argument is not numeric or logical: returning NA
</code></pre>

<pre><code>## Error: undefined columns selected
</code></pre>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-42" style="background:;">
  <hgroup>
    <h2>sqldf</h2>
  </hgroup>
  <article>
    <p>This allows you to treat <code>data.frame</code> objects as SQL tables and use SQL statements</p>

<pre><code class="r">library(sqldf)
sqldf(&quot;select cyl, avg(mpg) from mtcars group by cyl&quot;)
</code></pre>

<pre><code>##   cyl avg(mpg)
## 1   4    26.66
## 2   6    19.74
## 3   8    15.10
</code></pre>

    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="segue dark" id="slide-43" style="background:;">
  <hgroup>
    <h2>Live-coding</h2>
  </hgroup>
  <article>
    
    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="segue dark" id="slide-44" style="background:;">
  <hgroup>
    <h2>Visualization</h2>
  </hgroup>
  <article>
    
    <div id="footer">
  <div class='runhead'><p style='text-align:right'>R Basics II</p></div>
  </div>

  </article>
  <!-- Presenter Notes -->
</slide>

    <slide class="backdrop"></slide>
  </slides>

  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
<!-- Grab CDN jQuery, fall back to local if offline -->
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
<script>window.jQuery || document.write('<script src="libraries/widgets/quiz/js/jquery-1.7.min.js"><\/script>')</script>
<!-- Load Javascripts for Widgets -->
<!-- MathJax: Fall back to local if CDN offline but local image fonts are not supported (saves >100MB) -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<!-- <script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script> -->
<script>window.MathJax || document.write('<script type="text/x-mathjax-config">MathJax.Hub.Config({"HTML-CSS":{imageFont:null}});<\/script><script src="libraries/widgets/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><\/script>')
</script>
<script src='libraries/widgets/bootstrap/js/bootstrap.min.js'></script>
<script>  
$(function (){ 
  $("#example").popover(); 
  $("[rel='tooltip']").tooltip(); 
});  
</script>  
<!-- LOAD HIGHLIGHTER JS FILES -->
<script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<!-- DONE LOADING HIGHLIGHTER JS FILES -->
</html>